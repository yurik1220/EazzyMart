<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Online Grocery - Frontend (HTML/CSS/JS)</title>
  <style>
    /* --- Simple, modern styles --- */
    :root{--bg:#f6f7fb;--card:#fff;--accent:#2b8aef;--muted:#6b7280}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:var(--bg); color:#111}
    header{background:linear-gradient(90deg,#fff 0%, #f3f6ff 100%); padding:18px 28px; display:flex; gap:20px; align-items:center; box-shadow:0 1px 0 rgba(0,0,0,0.04)}
    .brand{font-weight:700; font-size:20px; color:var(--accent)}
    .search{flex:1; display:flex; gap:8px}
    .search input{flex:1;padding:10px;border-radius:8px;border:1px solid #e6e9ef}
    .controls{display:flex;gap:8px}
    button{background:var(--accent); color:white;border:0;padding:10px 12px;border-radius:8px;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid #dbe9ff}
    main{padding:28px; max-width:1100px;margin:18px auto}
    .filters{display:flex;gap:10px;align-items:center;margin-bottom:16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(20,20,50,0.04);display:flex;flex-direction:column}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .title{font-weight:600}
    .price{font-weight:700;color:var(--accent)}
    .actions{display:flex;gap:8px;margin-top:10px}

    /* cart drawer */
    .cart-btn{position:relative}
    .cart-count{position:absolute;top:-6px;right:-8px;background:#ff5a5f;color:white;border-radius:50%;padding:4px 7px;font-size:12px}
    .drawer{position:fixed;right:18px;top:68px;width:360px;max-width:92vw;background:var(--card);border-radius:12px;padding:12px;box-shadow:0 20px 40px rgba(10,10,30,0.12);display:flex;flex-direction:column;z-index:60}
    .drawer h3{margin:0 0 8px 0}
    .cart-item{display:flex;gap:10px;align-items:center;border-bottom:1px solid #f2f4f8;padding:8px 0}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .qty button{padding:6px 8px;background:#f3f5fb;border-radius:6px;border:1px solid #e8ecf8;color:#333}
    .checkout{margin-top:10px;display:flex;gap:8px}

    /* admin panel */
    .admin-panel{margin-top:20px;background:#fff;padding:12px;border-radius:12px;box-shadow:0 6px 20px rgba(20,20,50,0.04)}
    .form-row{display:flex;gap:8px;margin-bottom:8px}
    .form-row input, .form-row select{flex:1;padding:8px;border-radius:8px;border:1px solid #e6e9ef}

    footer{padding:18px;text-align:center;color:var(--muted)}

    @media(max-width:640px){header{flex-wrap:wrap} .drawer{left:8px;right:8px;top:auto;bottom:10px}}
  </style>
</head>
<body>
  <header>
    <div class="brand">Fruit & Veggie — Online Grocery</div>
    <div class="search">
      <input id="searchInput" placeholder="Search products, e.g. 'apple'" />
      <select id="categoryFilter">
        <option value="all">All categories</option>
      </select>
    </div>
    <div class="controls">
      <button id="clearStorage" class="ghost">Reset App</button>
      <button id="toggleAdmin" class="ghost">Admin</button>
      <button id="openCart" class="cart-btn">Cart <span id="cartCount" class="cart-count">0</span></button>
    </div>
  </header>

  <main>
    <div class="filters">
      <div id="stats">Showing <strong id="showCount">0</strong> products</div>
      <div style="flex:1"></div>
      <div>Sort:
        <select id="sortBy">
          <option value="default">Default</option>
          <option value="price-asc">Price ↑</option>
          <option value="price-desc">Price ↓</option>
          <option value="name-asc">Name A→Z</option>
        </select>
      </div>
    </div>

    <section id="productGrid" class="grid"></section>

    <section class="admin-panel" id="adminPanel" style="display:none">
      <h3>Admin: Add product (frontend only)</h3>
      <div class="form-row">
        <input id="pName" placeholder="Product name" />
        <input id="pPrice" type="number" placeholder="Price" />
      </div>
      <div class="form-row">
        <input id="pImage" placeholder="Image URL" />
        <input id="pCategory" placeholder="Category" />
      </div>
      <div style="display:flex;gap:8px">
        <button id="addProduct">Add Product</button>
        <button id="seedSample" class="ghost">Seed Sample Data</button>
      </div>
    </section>
  </main>

  <div id="cartDrawer" class="drawer" style="display:none"></div>

  <footer>Prototype frontend • No backend required • Data stored in localStorage</footer>

  <script>
    /***** Simple single-file Online Grocery Frontend (HTML/CSS/JS) *****/

    // --- Data model: products and cart stored in localStorage ---
    const STORAGE_KEYS = { PRODUCTS: 'og_products_v1', CART: 'og_cart_v1' };

    // Default sample products
    const SAMPLE_PRODUCTS = [
      {id: 'p1', name: 'Red Apples (1kg)', price: 120, category: 'Fruits', image: 'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?auto=format&fit=crop&w=800&q=60'},
      {id: 'p2', name: 'Bananas (1kg)', price: 80, category: 'Fruits', image: 'https://images.unsplash.com/photo-1574226516831-e1dff420e12e?auto=format&fit=crop&w=800&q=60'},
      {id: 'p3', name: 'Carrots (500g)', price: 55, category: 'Vegetables', image: 'https://images.unsplash.com/photo-1582515073490-3998139c8b7f?auto=format&fit=crop&w=800&q=60'},
      {id: 'p4', name: 'Romaine Lettuce', price: 45, category: 'Vegetables', image: 'https://images.unsplash.com/photo-1547516508-4a5a64d9e3b9?auto=format&fit=crop&w=800&q=60'},
      {id: 'p5', name: 'Whole Milk (1L)', price: 95, category: 'Dairy', image: 'https://images.unsplash.com/photo-1582719478250-63f3c2cde2b4?auto=format&fit=crop&w=800&q=60'}
    ];

    // Utility: read/write localStorage safely
    function loadJSON(key, fallback){ try { const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : fallback; } catch(e){ console.error(e); return fallback; } }
    function saveJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

    // Initialize products if not present
    function ensureProducts(){ let prods = loadJSON(STORAGE_KEYS.PRODUCTS, null); if(!prods){ prods = SAMPLE_PRODUCTS.slice(); saveJSON(STORAGE_KEYS.PRODUCTS, prods); } return prods; }

    // App state
    let products = ensureProducts();
    let cart = loadJSON(STORAGE_KEYS.CART, {}); // { productId: qty }

    // --- DOM refs ---
    const productGrid = document.getElementById('productGrid');
    const cartDrawer = document.getElementById('cartDrawer');
    const openCartBtn = document.getElementById('openCart');
    const cartCount = document.getElementById('cartCount');
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const showCount = document.getElementById('showCount');
    const sortBy = document.getElementById('sortBy');
    const adminPanel = document.getElementById('adminPanel');

    // --- Render functions ---
    function renderProducts(list){ productGrid.innerHTML = ''; list.forEach(p=>{
      const el = document.createElement('div'); el.className = 'card';
      el.innerHTML = `
        <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/400x240?text=No+Image'">
        <div style='margin-top:8px'>
          <div class='meta'>
            <div class='title'>${p.name}</div>
            <div class='price'>₱${numberFormat(p.price)}</div>
          </div>
          <div style='color:var(--muted);font-size:13px;margin-top:6px'>${p.category}</div>
          <div class='actions'>
            <button class='add' data-id='${p.id}'>Add to cart</button>
            <button class='ghost' onclick="viewDetails('${p.id}')">View</button>
          </div>
        </div>
      `;
      productGrid.appendChild(el);
    }); showCount.textContent = list.length; }

    function renderCart(){
      cartDrawer.innerHTML = '';
      const title = document.createElement('h3'); title.textContent = 'Your Cart'; cartDrawer.appendChild(title);

      const keys = Object.keys(cart);
      if(keys.length===0){ const p = document.createElement('div'); p.textContent='Cart is empty'; cartDrawer.appendChild(p); renderCartCount(); return; }

      let total = 0;
      keys.forEach(id=>{
        const qty = cart[id];
        const prod = products.find(p=>p.id===id);
        if(!prod) return;
        const line = document.createElement('div'); line.className='cart-item';
        line.innerHTML = `
          <img src='${prod.image}' onerror="this.src='https://via.placeholder.com/80x80?text=No+Img'"/>
          <div style='flex:1'>
            <div style='font-weight:600'>${prod.name}</div>
            <div style='color:var(--muted);font-size:13px'>₱${numberFormat(prod.price)} × ${qty} = ₱${numberFormat(prod.price*qty)}</div>
          </div>
          <div style='display:flex;flex-direction:column;align-items:center'>
            <div class='qty'>
              <button onclick="changeQty('${id}', -1)">-</button>
              <div style='padding:6px 8px;border-radius:6px;border:1px solid #f0f2f7'>${qty}</div>
              <button onclick="changeQty('${id}', 1)">+</button>
            </div>
            <button style='margin-top:6px' onclick="removeFromCart('${id}')">Remove</button>
          </div>
        `;
        cartDrawer.appendChild(line);
        total += prod.price * qty;
      });

      const footer = document.createElement('div'); footer.style.marginTop='12px';
      footer.innerHTML = `
        <div style='font-weight:700;margin-bottom:8px'>Total: ₱${numberFormat(total)}</div>
        <div class='checkout'>
          <button onclick='checkout()'>Checkout</button>
          <button class='ghost' onclick='closeCart()'>Continue Shopping</button>
        </div>
      `;
      cartDrawer.appendChild(footer);
      renderCartCount();
    }

    function renderCartCount(){ const count = Object.values(cart).reduce((s,n)=>s+n,0); cartCount.textContent = count; }

    // --- Actions ---
    function addToCart(id, qty=1){ cart[id] = (cart[id]||0) + qty; saveJSON(STORAGE_KEYS.CART, cart); renderCart(); }
    function changeQty(id, delta){ if(!cart[id]) return; cart[id] += delta; if(cart[id] <= 0) delete cart[id]; saveJSON(STORAGE_KEYS.CART, cart); renderCart(); }
    function removeFromCart(id){ delete cart[id]; saveJSON(STORAGE_KEYS.CART, cart); renderCart(); }
    function checkout(){
      // Frontend simulation: collect cart details, show summary and clear cart
      const keys = Object.keys(cart); if(keys.length===0){ alert('Cart empty'); return; }
      let summary = 'Order summary:\n'; let total = 0;
      keys.forEach(id=>{ const p = products.find(x=>x.id===id); if(!p) return; summary += `${p.name} × ${cart[id]} = ₱${numberFormat(p.price*cart[id])}\n`; total += p.price*cart[id]; });
      summary += `\nTotal: ₱${numberFormat(total)}\n\n(This is a frontend demo. In a real app this would go to the server.)`;
      if(confirm(summary + '\n\nPlace order?')){ cart = {}; saveJSON(STORAGE_KEYS.CART, cart); renderCart(); alert('Order placed — thank you!'); closeCart(); }
    }

    function viewDetails(id){ const p = products.find(x=>x.id===id); if(!p) return; alert(`${p.name}\n\nCategory: ${p.category}\nPrice: ₱${numberFormat(p.price)}\n\nDescription: This is a sample product for the frontend demo.`); }

    // --- Filters and sorting ---
    function populateCategories(){ const cats = Array.from(new Set(products.map(p=>p.category))).sort(); categoryFilter.innerHTML = '<option value="all">All categories</option>' + cats.map(c=>`<option value="${c}">${c}</option>`).join(''); }

    function applyFilters(){ let q = searchInput.value.trim().toLowerCase(); let cat = categoryFilter.value; let list = products.filter(p=>{
      const matchQ = p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q);
      const matchC = (cat==='all') || p.category===cat;
      return matchQ && matchC;
    });
    // sorting
    const s = sortBy.value;
    if(s==='price-asc') list.sort((a,b)=>a.price-b.price);
    else if(s==='price-desc') list.sort((a,b)=>b.price-a.price);
    else if(s==='name-asc') list.sort((a,b)=>a.name.localeCompare(b.name));
    renderProducts(list);
    renderCartCount();
    saveJSON(STORAGE_KEYS.PRODUCTS, products);
  }

    // --- Admin functions (frontend only) ---
    function toggleAdmin(){ adminPanel.style.display = adminPanel.style.display==='none' ? 'block' : 'none'; }
    function addProductFromForm(){ const name = document.getElementById('pName').value.trim(); const price = Number(document.getElementById('pPrice').value); const image = document.getElementById('pImage').value.trim() || 'https://via.placeholder.com/400x240?text=No+Image'; const category = document.getElementById('pCategory').value.trim()||'Misc'; if(!name || !price){ alert('Add name and price'); return; }
      const id = 'p'+(Date.now()); products.push({id,name,price,category,image}); saveJSON(STORAGE_KEYS.PRODUCTS, products); populateCategories(); applyFilters(); alert('Product added (frontend only)'); }
    function seedSample(){ if(confirm('Replace existing products with sample data?')){ products = SAMPLE_PRODUCTS.slice(); saveJSON(STORAGE_KEYS.PRODUCTS, products); populateCategories(); applyFilters(); alert('Sample data seeded'); } }

    // --- Helpers ---
    function numberFormat(n){ return Number(n).toLocaleString('en-PH'); }
    function openCart(){ cartDrawer.style.display='block'; renderCart(); }
    function closeCart(){ cartDrawer.style.display='none'; }

    // --- Event wiring ---
    document.addEventListener('click', (e)=>{ if(e.target.matches('.add')){ addToCart(e.target.dataset.id); } });
    openCartBtn.addEventListener('click', ()=>{ openCart(); });
    document.getElementById('toggleAdmin').addEventListener('click', toggleAdmin);
    document.getElementById('addProduct').addEventListener('click', addProductFromForm);
    document.getElementById('seedSample').addEventListener('click', seedSample);
    document.getElementById('clearStorage').addEventListener('click', ()=>{ if(confirm('Reset app data (products + cart)?')){ localStorage.removeItem(STORAGE_KEYS.PRODUCTS); localStorage.removeItem(STORAGE_KEYS.CART); products = ensureProducts(); cart = {}; saveJSON(STORAGE_KEYS.CART, cart); populateCategories(); applyFilters(); renderCart(); alert('Reset complete'); } });
    searchInput.addEventListener('input', applyFilters);
    categoryFilter.addEventListener('change', applyFilters);
    sortBy.addEventListener('change', applyFilters);

    // close drawer if clicked outside
    document.addEventListener('click', (e)=>{ if(!cartDrawer.contains(e.target) && !openCartBtn.contains(e.target) && cartDrawer.style.display==='block'){ /* closeCart(); */ } });

    // --- Init ---
    populateCategories(); applyFilters(); renderCartCount();
  </script>
</body>
</html>
